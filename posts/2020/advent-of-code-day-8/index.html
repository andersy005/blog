
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Advent of Code - Day 8: Handheld Halting" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.andersonbanihirwe.dev/posts/2020/advent-of-code-day-8/" />
<meta property="og:site_name" content=" Paysage Pythonique | Anderson Banihirwe" />
<meta property="og:description" content="Part One: Your flight to the major airline hub reaches cruising altitude without incident. While you consider checking the in-flight menu for one of those drinks that come with a little umbrella, y..." />
<meta property="og:image" content="https://blog.andersonbanihirwe.dev/_static/share.png" />
<meta property="og:image:alt" content=" Paysage Pythonique | Anderson Banihirwe" />
<meta name="description" content="Part One: Your flight to the major airline hub reaches cruising altitude without incident. While you consider checking the in-flight menu for one of those drinks that come with a little umbrella, y..." />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@andersy005" />
<meta name="twitter:creator" content="@andersy005" />

    <title>Advent of Code - Day 8: Handheld Halting</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=3c15507b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css?v=2a6c4383" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css?v=d290406d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script src="../../../_static/documentation_options.js?v=d4c685ee"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "andersy005/blog");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "üí¨ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="blog.andersonbanihirwe.dev" defer="defer" src="https://plausible.andersonb.xyz/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'posts/2020/advent-of-code-day-8';</script>
    <link rel="icon" href="../../../_static/share.png"/>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../posts/atom.xml"
  title="Paysage Pythonique"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this site..."
         aria-label="Search this site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
    <p class="title logo__title"></p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../">
                        ‚úçüèΩ Posts
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../about/">
                        About me
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../talks/">
                        üéô Talks
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../teaching/">
                        Teaching
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://cv.andersonbanihirwe.dev/">
                        üßæ CV
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://www.youtube.com/channel/UCb8F9w9OHjRize4-MDbwRMw">
                        Video
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/andersy005/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/andersy005" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../">
                        ‚úçüèΩ Posts
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../about/">
                        About me
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../talks/">
                        üéô Talks
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../teaching/">
                        Teaching
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://cv.andersonbanihirwe.dev/">
                        üßæ CV
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://www.youtube.com/channel/UCb8F9w9OHjRize4-MDbwRMw">
                        Video
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/andersy005/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/andersy005" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">  
<h2>
   <i class="fa fa-calendar"></i>
  08 December 2020 
</h2>

<ul>
   
<li id="author">
  <span><i class="fa-fw fa fa-user"></i></span
  >
   
  <a href="../../author/anderson-banihirwe/">Anderson Banihirwe</a>  
</li>
    
<li id="tags">
  <span><i class="fa-fw fa fa-tags"></i> </span
  >
   
  <a href="../../tag/adventofcode/">adventofcode</a>   
  <a href="../../tag/python/">python</a>  
</li>
 
</ul>
</div>
        <div class="sidebar-primary-item">
<h3>
  <a href="../../">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="../../2022/multitude/"
      >06 March - ¬´ Multitude de Stromae ¬ª - Des morceaux aussi forts sur des sujets si primordials üé∂</a
    >
  </li>
  
  <li>
    <a href="../../2021/dictionary-merge-and-update-operators/"
      >04 June - Dictionary Merge and Update Operators in Python 3.9</a
    >
  </li>
  
  <li>
    <a href="../../2021/mesdames/"
      >13 March - ¬´ Mesdames ¬ª - Parce que l‚Äôavenir appartient √† celles qu‚Äôon aime trop üé∂</a
    >
  </li>
  
  <li>
    <a href="../../2021/lets-encrypt-wildcard-ssl-certificate-on-centos/"
      >27 February - How to Generate Wildcard SSL Certificate using Let‚Äôs Encrypt/Certbot on CentOS</a
    >
  </li>
  
  <li>
    <a href="../../2021/new-in-xarray-v0.17/"
      >26 February - üöÄ Xarray v0.17.0 is here!</a
    >
  </li>
  
</ul>
</div>
        <div class="sidebar-primary-item">
<h3>
  <a href="../../archive/">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="../../2022/">2022 (1)</a>
  </li>
    
  <li>
    <a href="../../2021/">2021 (8)</a>
  </li>
    
  <li>
    <a href="../">2020 (14)</a>
  </li>
    
  <li>
    <a href="../../2019/">2019 (1)</a>
  </li>
   
</ul>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Advent of Code - Day 8: Handheld Halting</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                   <section id="advent-of-code-day-8-handheld-halting">
<h1>Advent of Code - Day 8: Handheld Halting<a class="headerlink" href="#advent-of-code-day-8-handheld-halting" title="Link to this heading">#</a></h1>
<section id="part-one">
<h2>Part One<a class="headerlink" href="#part-one" title="Link to this heading">#</a></h2>
<p>Your flight to the major airline hub reaches cruising altitude without incident.
While you consider checking the in-flight menu for one of those drinks that come
with a little umbrella, you are interrupted by the kid sitting next to you.</p>
<p>Their
<a class="reference external" href="https://en.wikipedia.org/wiki/Handheld_game_console">handheld game console</a>
won‚Äôt turn on! They ask if you can take a look.</p>
<p>You narrow the problem down to a strange infinite loop in the boot code (your
puzzle input) of the device. You should be able to fix it, but first you need to
be able to run the code in isolation.</p>
<p>The boot code is represented as a text file with one instruction per line of
text. Each instruction consists of an operation (acc, jmp, or nop) and an
argument (a signed number like +4 or -20).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">acc</span></code> increases or decreases a single global value called the accumulator by
the value given in the argument. For example, acc +7 would increase the
accumulator by 7. The accumulator starts at 0. After an acc instruction, the
instruction immediately below it is executed next.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jmp</span></code> jumps to a new instruction relative to itself. The next instruction to
execute is found using the argument as an offset from the jmp instruction; for
example, jmp +2 would skip the next instruction, jmp +1 would continue to the
instruction immediately below it, and jmp -20 would cause the instruction 20
lines above to be executed next.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nop</span></code> stands for No OPeration - it does nothing. The instruction immediately
below it is executed next.</p></li>
</ul>
<p>For example, consider the following program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nop</span> <span class="o">+</span><span class="mi">0</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>
<span class="n">jmp</span> <span class="o">+</span><span class="mi">4</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">3</span>
<span class="n">jmp</span> <span class="o">-</span><span class="mi">3</span>
<span class="n">acc</span> <span class="o">-</span><span class="mi">99</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>
<span class="n">jmp</span> <span class="o">-</span><span class="mi">4</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">6</span>
</pre></div>
</div>
<p>These instructions are visited in this order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>nop +0  | 1
acc +1  | 2, 8(!)
jmp +4  | 3
acc +3  | 6
jmp -3  | 7
acc -99 |
acc +1  | 4
jmp -4  | 5
acc +6  |
</pre></div>
</div>
<p>First, the nop +0 does nothing. Then, the accumulator is increased from 0 to 1
(acc +1) and jmp +4 sets the next instruction to the other acc +1 near the
bottom. After it increases the accumulator from 1 to 2, jmp -4 executes, setting
the next instruction to the only acc +3. It sets the accumulator to 5, and jmp
-3 causes the program to continue back at the first acc +1.</p>
<p>This is an infinite loop: with this sequence of jumps, the program will run
forever. The moment the program tries to run any instruction a second time, you
know it will never terminate.</p>
<p>Immediately before the program would run an instruction a second time, the value
in the accumulator is 5.</p>
<p>Run your copy of the boot code. Immediately before any instruction is executed a
second time, <strong>what value is in the accumulator?</strong></p>
</section>
<section id="load-and-clean-input-data">
<h2>Load and Clean Input data<a class="headerlink" href="#load-and-clean-input-data" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input data can be found
<a class="reference external" href="https://adventofcode.com/2020/day/8">here</a>. :::</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>


<span class="k">def</span> <span class="nf">parse_instruction</span><span class="p">(</span><span class="n">instruction</span><span class="p">):</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">instruction</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Instruction</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>


<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../../data/advent-of-code/2020/day-8-input&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">fid</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">Instruction</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Instruction&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;operation&#39;</span><span class="p">,</span> <span class="s1">&#39;argument&#39;</span><span class="p">])</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">parse_instruction</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>656
[Instruction(operation=&#39;acc&#39;, argument=-7), Instruction(operation=&#39;acc&#39;, argument=2)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test_data</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">nop +0</span>
<span class="s2">acc +1</span>
<span class="s2">jmp +4</span>
<span class="s2">acc +3</span>
<span class="s2">jmp -3</span>
<span class="s2">acc -99</span>
<span class="s2">acc +1</span>
<span class="s2">jmp -4</span>
<span class="s2">acc +6</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">clean_test_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">parse_instruction</span><span class="p">(</span><span class="n">instruction</span><span class="p">)</span> <span class="k">for</span> <span class="n">instruction</span> <span class="ow">in</span> <span class="n">test_data</span><span class="p">]</span>
<span class="n">clean_test_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Instruction(operation=&#39;nop&#39;, argument=0),
 Instruction(operation=&#39;acc&#39;, argument=1),
 Instruction(operation=&#39;jmp&#39;, argument=4),
 Instruction(operation=&#39;acc&#39;, argument=3),
 Instruction(operation=&#39;jmp&#39;, argument=-3),
 Instruction(operation=&#39;acc&#39;, argument=-99),
 Instruction(operation=&#39;acc&#39;, argument=1),
 Instruction(operation=&#39;jmp&#39;, argument=-4),
 Instruction(operation=&#39;acc&#39;, argument=6)]
</pre></div>
</div>
</div>
</div>
<section id="solution">
<h3>Solution<a class="headerlink" href="#solution" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_program_status</span><span class="p">(</span><span class="n">instructions</span><span class="p">):</span>
    <span class="n">accumulator</span><span class="p">,</span> <span class="n">pointer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">terminated</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">terminated</span> <span class="ow">and</span> <span class="n">pointer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
        <span class="n">instruction</span> <span class="o">=</span> <span class="n">instructions</span><span class="p">[</span><span class="n">pointer</span><span class="p">]</span>
        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pointer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">instruction</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;nop&#39;</span><span class="p">:</span>
            <span class="n">pointer</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">instruction</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;jmp&#39;</span><span class="p">:</span>
            <span class="n">pointer</span> <span class="o">+=</span> <span class="n">instruction</span><span class="o">.</span><span class="n">argument</span>

        <span class="k">elif</span> <span class="n">instruction</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;acc&#39;</span><span class="p">:</span>
            <span class="n">pointer</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">accumulator</span> <span class="o">+=</span> <span class="n">instruction</span><span class="o">.</span><span class="n">argument</span>

        <span class="n">terminated</span> <span class="o">=</span> <span class="n">pointer</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">instructions</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span> <span class="o">=</span> <span class="n">find_program_status</span><span class="p">(</span><span class="n">clean_test_data</span><span class="p">)</span>
<span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(5, False)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span> <span class="o">=</span> <span class="n">find_program_status</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1594, False)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="part-two">
<h2>Part Two<a class="headerlink" href="#part-two" title="Link to this heading">#</a></h2>
<p>After some careful analysis, you believe <strong>that exactly one instruction is
corrupted</strong>.</p>
<p>Somewhere in the program, either a <code class="docutils literal notranslate"><span class="pre">jmp</span></code> is supposed to be a <code class="docutils literal notranslate"><span class="pre">nop</span></code>, or a <code class="docutils literal notranslate"><span class="pre">nop</span></code>
is supposed to be a <code class="docutils literal notranslate"><span class="pre">jmp</span></code>. (No <code class="docutils literal notranslate"><span class="pre">acc</span></code> instructions were harmed in the corruption
of this boot code.)</p>
<p>The program is supposed to terminate by attempting to execute an instruction
immediately after the last instruction in the file. By changing exactly one
<code class="docutils literal notranslate"><span class="pre">jmp</span></code> or <code class="docutils literal notranslate"><span class="pre">nop</span></code>, you can repair the boot code and make it terminate correctly.</p>
<p>For example, consider the same program from above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nop</span> <span class="o">+</span><span class="mi">0</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>
<span class="n">jmp</span> <span class="o">+</span><span class="mi">4</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">3</span>
<span class="n">jmp</span> <span class="o">-</span><span class="mi">3</span>
<span class="n">acc</span> <span class="o">-</span><span class="mi">99</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>
<span class="n">jmp</span> <span class="o">-</span><span class="mi">4</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">6</span>
</pre></div>
</div>
<p>If you change the first instruction from <code class="docutils literal notranslate"><span class="pre">nop</span> <span class="pre">+0</span></code> to <code class="docutils literal notranslate"><span class="pre">jmp</span> <span class="pre">+0</span></code>, it would create a
single-instruction infinite loop, never leaving that instruction. If you change
almost any of the jmp instructions, the program will still eventually find
another jmp instruction and loop forever.</p>
<p>However, if you change the second-to-last instruction (from <code class="docutils literal notranslate"><span class="pre">jmp</span> <span class="pre">-4</span></code> to
<code class="docutils literal notranslate"><span class="pre">nop</span> <span class="pre">-4</span></code>), the program terminates! The instructions are visited in this order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nop</span> <span class="o">+</span><span class="mi">0</span>  <span class="o">|</span> <span class="mi">1</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>  <span class="o">|</span> <span class="mi">2</span>
<span class="n">jmp</span> <span class="o">+</span><span class="mi">4</span>  <span class="o">|</span> <span class="mi">3</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">3</span>  <span class="o">|</span>
<span class="n">jmp</span> <span class="o">-</span><span class="mi">3</span>  <span class="o">|</span>
<span class="n">acc</span> <span class="o">-</span><span class="mi">99</span> <span class="o">|</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">1</span>  <span class="o">|</span> <span class="mi">4</span>
<span class="n">nop</span> <span class="o">-</span><span class="mi">4</span>  <span class="o">|</span> <span class="mi">5</span>
<span class="n">acc</span> <span class="o">+</span><span class="mi">6</span>  <span class="o">|</span> <span class="mi">6</span>
</pre></div>
</div>
<p>After the last instruction (<code class="docutils literal notranslate"><span class="pre">acc</span> <span class="pre">+6</span></code>), the program terminates by attempting to
run the instruction below the last instruction in the file. With this change,
after the program terminates, the accumulator contains the value 8 (<code class="docutils literal notranslate"><span class="pre">acc</span> <span class="pre">+1</span></code>,
<code class="docutils literal notranslate"><span class="pre">acc</span> <span class="pre">+1</span></code>, <code class="docutils literal notranslate"><span class="pre">acc</span> <span class="pre">+6</span></code>).</p>
<p>Fix the program so that it terminates normally by changing exactly one <code class="docutils literal notranslate"><span class="pre">jmp</span></code> (to
<code class="docutils literal notranslate"><span class="pre">nop</span></code>) or <code class="docutils literal notranslate"><span class="pre">nop</span></code> (to <code class="docutils literal notranslate"><span class="pre">jmp</span></code>). <strong>What is the value of the accumulator after the
program terminates?</strong></p>
<section id="id1">
<h3>Solution<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>


<span class="k">def</span> <span class="nf">fix_program</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">instructions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">flip</span> <span class="o">=</span> <span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">operation</span><span class="o">=</span><span class="s1">&#39;jmp&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;nop&#39;</span>
        <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">operation</span><span class="o">=</span><span class="s1">&#39;nop&#39;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">instruction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instructions</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">instruction</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;nop&#39;</span> <span class="ow">or</span> <span class="n">instruction</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s1">&#39;jmp&#39;</span><span class="p">:</span>
            <span class="n">previous</span> <span class="o">=</span> <span class="n">instruction</span>
            <span class="n">instructions</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">flip</span><span class="p">(</span><span class="n">instruction</span><span class="p">)</span>
            <span class="n">accumulator</span><span class="p">,</span> <span class="n">terminated</span> <span class="o">=</span> <span class="n">find_program_status</span><span class="p">(</span><span class="n">instructions</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">terminated</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">instructions</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">previous</span>
    <span class="k">return</span> <span class="n">accumulator</span>


<span class="n">fix_program</span><span class="p">(</span><span class="n">clean_test_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The value of the accumulator after the program terminates is: </span><span class="si">{</span><span class="n">fix_program</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The value of the accumulator after the program terminates is: 758
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     
    <a href="../advent-of-code-day-7/">
      <i class="fa fa-arrow-circle-left"></i> Advent of Code - Day 7: Handy Haversacks
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     
    <a href="../advent-of-code-day-9/">
      Advent of Code - Day 9: Encoding Error <i
        class="fa fa-arrow-circle-right"
      ></i
      >
    </a>
    
  </span>
</div>
  
</div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-one">Part One</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-and-clean-input-data">Load and Clean Input data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-two">Part Two</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Solution</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../../_sources/posts/2020/advent-of-code-day-8.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      ¬© Copyright 2018-2024. Except where otherwise noted, this work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>